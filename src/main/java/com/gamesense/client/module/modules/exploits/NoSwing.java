package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.event.events.PacketEvent;
import com.gamesense.api.setting.values.BooleanSetting;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketAnimation;

@Module.Declaration(name = "NoSwing", category = Category.Exploits)
public class NoSwing extends Module {

    BooleanSetting client = registerBoolean("Client", true);
    BooleanSetting server = registerBoolean("Server", false);
    @SuppressWarnings("unused")
    public void onUpdate() {

        if (client.getValue()) {

            mc.player.isSwingInProgress = false;
            mc.player.swingProgressInt = 0;
            mc.player.swingProgress = 0.0f;
            mc.player.prevSwingProgress = 0.0f;

        }

    }

    @EventHandler
    private final Listener<PacketEvent.Send> listener = new Listener<>(event -> {
        if (event.getPacket() instanceof CPacketAnimation && server.getValue()) {

            event.cancel();

        }
    });
}