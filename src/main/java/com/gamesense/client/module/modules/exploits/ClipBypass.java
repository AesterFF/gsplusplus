package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.setting.values.BooleanSetting;
import com.gamesense.api.setting.values.DoubleSetting;
import com.gamesense.api.setting.values.IntegerSetting;
import com.gamesense.api.setting.values.ModeSetting;
import com.gamesense.api.util.misc.Timer;
import com.gamesense.api.util.player.PlayerUtil;
import com.gamesense.api.util.world.MotionUtil;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.math.Vec3d;
import scala.Int;

import java.util.Arrays;

@Module.Declaration(name = "ClipBypass", category = Category.Exploits)
public class ClipBypass extends Module {

    boolean allowDisable;

    double gamerHP;

    int num;

    IntegerSetting packets = registerInteger("Packets", 8,0,280);
    BooleanSetting xz = registerBoolean("XZ", false);
    BooleanSetting y = registerBoolean("Y", true);
    IntegerSetting amountClipXZ = registerInteger("Factor XZ", 7, 0, 256);
    IntegerSetting amountClip = registerInteger("Factor Y", 7, 0, 256);


    public void onEnable() {

        num = 0;
        gamerHP = mc.player.getHealth();
        allowDisable = false;

    }

    @Override
    public void onUpdate() {

        double dir[] = MotionUtil.forward(1);


        for (int i = 0; i < packets.getValue(); i++) {

            if (y.getValue()){
                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY + amountClip.getValue(), mc.player.posZ, false));
                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY + 0.05, mc.player.posZ, false));
            }

            if (xz.getValue()) {

                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX + dir[0] * amountClipXZ.getValue(), mc.player.posY, mc.player.posZ + dir[1] * amountClipXZ.getValue(), false));
                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX + dir[0] * 0.05, mc.player.posY, mc.player.posZ + dir[1] * 0.05, false));

            }

            num++;

            if (num == 80) {
                disable();
            }
        }

        mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY, mc.player.posZ, true));


    }
}
