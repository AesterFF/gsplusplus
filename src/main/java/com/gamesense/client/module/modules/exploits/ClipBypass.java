package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.setting.values.BooleanSetting;
import com.gamesense.api.setting.values.DoubleSetting;
import com.gamesense.api.setting.values.IntegerSetting;
import com.gamesense.api.setting.values.ModeSetting;
import com.gamesense.api.util.misc.Timer;
import com.gamesense.api.util.player.PlayerUtil;
import com.gamesense.api.util.world.MotionUtil;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.math.Vec3d;
import scala.Int;

import java.util.Arrays;

@Module.Declaration(name = "ClipBypass", category = Category.Exploits)
public class ClipBypass extends Module {

    boolean allowDisable;

    double gamerHP;

    int num;

    int adjustedDelay;

    BooleanSetting y = registerBoolean("Y", true);
    BooleanSetting xz = registerBoolean("XZ", false);
    IntegerSetting amountClip = registerInteger("Factor Y", 7, 0, 256);
    IntegerSetting amountClipXZ = registerInteger("Factor XZ", 7, 0, 256);
    IntegerSetting delay = registerInteger("Multipliers", 1, 2, 20);


    public void onEnable() {

        num = 0;
        gamerHP = mc.player.getHealth();
        allowDisable = false;
        adjustedDelay = delay.getValue() * 80;

    }

    @Override
    public void onUpdate() {

        double dir[] = MotionUtil.forward(1);


        for (int i = 0; i < 80; i++) {

            if (y.getValue()){
                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY + amountClip.getValue() + 2.1, mc.player.posZ, false));
                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY + 0.05, mc.player.posZ, false));
            }

            if (xz.getValue()) {

                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX + amountClipXZ.getValue() * dir[0], mc.player.posY, mc.player.posZ + amountClipXZ.getValue() * dir[0], false));
                mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX + 0.05, mc.player.posY, mc.player.posZ + 0.05, false));

            }

            num++;

            if (num == adjustedDelay) {
                disable();
            }
        }

        mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX, mc.player.posY, mc.player.posZ, true));


    }
}
